import{_ as e,o,c as s,$ as a}from"./chunks/framework.9fa1e75e.js";const y=JSON.parse('{"title":"Windows development environment","description":"","frontmatter":{},"headers":[],"relativePath":"cookbook/windows-development.md","filePath":"cookbook/windows-development.md","lastUpdated":1690289066000}'),t={name:"cookbook/windows-development.md"},n=a(`<h1 id="windows-development-environment" tabindex="-1">Windows development environment <a class="header-anchor" href="#windows-development-environment" aria-label="Permalink to &quot;Windows development environment&quot;">​</a></h1><h2 id="installing-windows-subsystem-for-linux" tabindex="-1">Installing Windows Subsystem for Linux <a class="header-anchor" href="#installing-windows-subsystem-for-linux" aria-label="Permalink to &quot;Installing Windows Subsystem for Linux&quot;">​</a></h2><p>As Microsoft says, <a href="https://docs.microsoft.com/en-us/windows/dev-environment/javascript/windows-or-wsl#install-on-windows-subsystem-for-linux" target="_blank" rel="noreferrer">&quot;When working with JavaScript-based frameworks in a professional capacity, we recommend WSL...&quot;</a> So we&#39;ll start by installing WSL (Windows Subsystem for Linux). WSL allows us to run many Linux applications without change on any up-to-date Windows 10 or Windows 11 system. Crucially, we can follow most Linux- and Mac-oriented ApostropheCMS documentation without change. There are just a few things to note, which we&#39;ll cover here.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>We recommend that you use WSL2. If you have WSL1, here are <a href="https://docs.microsoft.com/en-us/windows/wsl/install#upgrade-version-from-wsl-1-to-wsl-2" target="_blank" rel="noreferrer">Microsoft&#39;s upgrade instructions.</a> As described in that article, you may need to take care of several steps including a kernel update and enabling virtualization in your BIOS. The correct steps to enable virtualization depend on your machine.</p><p>If you have never installed WSL before, WSL2 will be the default. The rest of this article assumes a first-time install of WSL2.</p></div><p>First, you must <a href="https://docs.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noreferrer">install WSL according to the documentation</a>. In particular we strongly recommend that you <a href="https://apps.microsoft.com/store/detail/ubuntu-2004/9N6SVWS3RX71?hl=en-us&amp;gl=US" target="_blank" rel="noreferrer">install Ubuntu 20.04 LTS, which can also be done from the Windows app store</a>. This method was tested for this article. Newer versions of Ubuntu might not support everything covered here, and 20.04 is supported until 2030.</p><p>Second, launch Ubuntu 20.04 from the Start menu to access the Linux shell prompt. If you did not install Ubuntu via the Windows Store, you might need to access the prompt a different way, for instance by launching Powershell and typing <code>wsl</code>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>From here on out, all commands are intended to be typed at the Ubuntu 20.04 shell prompt, not the regular Windows command or Powershell prompt.</p></div><p>Next, install <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noreferrer">nvm</a>. <code>nvm</code> is a great little utility that lets us run any version of Node.js we want without fussing with operating system packages. The correct command for installation changes over time, so <a href="https://github.com/nvm-sh/nvm#installing-and-updating" target="_blank" rel="noreferrer">follow the official nvm installation guide</a>. <strong>Do not</strong> follow nvm installation guides meant for the Windows command prompt. We want the plain vanilla instructions.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>You will need to exit the Ubuntu 20.04 window and open a new one after you complete the <code>nvm</code> installation step above. Otherwise, the <code>nvm install</code> command in the next step will cause a Command Not Found error.</p></div><p>Now, install and start Node.js 16.x with this command:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">nvm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span></span></code></pre></div><p>In the future, you can just type:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">nvm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If this produces a &quot;command not found&quot; error, you most likely did not install <code>nvm</code> yet, or you did not restart your Ubuntu 20.04 window after installing <code>nvm</code>.</p></div><p>Now we&#39;ll need to install the MongoDB database. While MongoDB does not officially support this, it works fine for development purposes, and you&#39;ll be deploying to Linux in production later anyway. The easiest way to do this is to skip the official MongoDB Community Edition (tricky to install) and Ubuntu packages (out of date), and instead install the convenient <code>m</code> utility. <code>m</code> lets you access any version of MongoDB any time you need it:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">m</span></span></code></pre></div><p>When that command completes, possibly with a harmless warning or two, it&#39;s time to activate the version of MongoDB we want:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">m</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5.0</span></span></code></pre></div><p>You&#39;ll be asked to confirm. If you see this message at the end:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Installation to /home/apostrophe/.local/bin complete!</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">==&gt; WARNING: $PATH does not include /home/apostrophe/.local/bin</span></span></code></pre></div><p>Then you should edit your <code>~/.bashrc</code> file, like this:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">code</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.bashrc</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If you get a <code>command not found</code> error, make sure you have Visual Studio Code installed on your Windows machine. Then launch Visual Studio Code, click on the Extensions icon, and click any &quot;reload required&quot; icon that appears. Then restart your Ubuntu shell window and try the command again. Alternatively, feel free to use the Linux command line editor of your choice.</p></div><p>At the end of <code>~/.bashrc</code>, add this line:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:~/.local/bin</span></span></code></pre></div><p>And be sure to save and close the file.</p><p>Then just <strong>exit your Ubuntu shell window and open a new one.</strong> This is the simplest way to reload <code>~/.bashrc</code>, which contains commands to be run on every shell launch.</p><p>If you do restart your shell window, make sure you run <code>m</code> again:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">m</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5.0</span></span></code></pre></div><h2 id="creating-a-data-folder-for-mongodb" tabindex="-1">Creating a data folder for MongoDB <a class="header-anchor" href="#creating-a-data-folder-for-mongodb" aria-label="Permalink to &quot;Creating a data folder for MongoDB&quot;">​</a></h2><p>MongoDB needs a place to store your database, and the default is a system folder. For development purposes, we want to leave system folders alone. So let&#39;s create our own place for it:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/mongodb-data/5.0</span></span></code></pre></div><h2 id="launching-mongodb-every-time-you-start-work" tabindex="-1">Launching MongoDB (every time you start work) <a class="header-anchor" href="#launching-mongodb-every-time-you-start-work" aria-label="Permalink to &quot;Launching MongoDB (every time you start work)&quot;">​</a></h2><p>Now we&#39;re ready to launch MongoDB. We&#39;ll do this at the start of every session of work with ApostropheCMS:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dbpath=/home/apostrophe/mongodb-data/5.0</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Since <code>--dbpath</code> doesn&#39;t understand <code>~</code> as a shortcut for &quot;my home directory&quot; in WSL2, we&#39;ve used the full path to our home directory here. In this case, we chose the username <code>apostrophe</code> when we set up Ubuntu 20.04. If you&#39;re not sure what username you created when you installed Ubuntu 20.04, type <code>echo $HOME</code> to find out.</p></div><p>You&#39;ll see quite a bit of output, and the command prompt should <strong>not</strong> return. It should just keep running — and that&#39;s exactly what we want. You should <strong>leave it running in this window for as long as you&#39;re working with ApostropheCMS, and open another, separate Ubuntu Window</strong> to continue your work.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If the command prompt does return, and you see a message like <code>fatal assertion</code>, then <code>mongod</code> was unable to start. Most likely you previously tried to run MongoDB in another way, and you need to fix a permissions problem and try again, like this:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/tmp/mongodb-27017.sock</span></span>
<span class="line"><span style="color:#FFCB6B;">mongod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dbpath=/home/apostrophe/mongodb-data/5.0</span></span></code></pre></div><p>You should only have to do this once to clean up the mess. In the future, <strong>just remember: don&#39;t use <code>sudo</code>, you don&#39;t need it and it only makes a mess.</strong> If there&#39;s an exception we&#39;ll explicitly show that in our tutorials.</p><p>Another possibility is that you tried to write <code>--dbpath=~/mongodb-data/5.0</code>. Again, you&#39;ll need to substitute your home directory name manually for the <code>~</code>. Use <code>echo $HOME</code> to find your home directory.</p><p>Finally, one more possibility: You might already be running MongoDB for Windows! It should actually be OK to do that, in which case you don&#39;t need to run it under WSL — Apostrophe running under WSL should still connect to MongoDB for Windows just fine — but if you have any difficulties with that version, shut down or uninstall MongoDB for Windows and follow the steps above.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If typing this every time seems like a pain, try adding this line to your <code>.bashrc</code> file:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">alias</span><span style="color:#A6ACCD;"> start-mongo</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mongod --dbpath=/home/apostrophe/mongodb-data/5.0</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>Save and close the file, restart your shell, and you can just type:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">start-mongo</span></span></code></pre></div></div><h2 id="installing-apostrophecms" tabindex="-1">Installing ApostropheCMS <a class="header-anchor" href="#installing-apostrophecms" aria-label="Permalink to &quot;Installing ApostropheCMS&quot;">​</a></h2><p>Now we&#39;re ready to install the Apostrophe CLI (Command Line Interface)! To get started, <strong>open a second Ubuntu 20.04 window</strong>, and in that Window type:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">nvm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span></span></code></pre></div><p>Now you&#39;re ready to use the current stable version of Node.js in this shell.</p><p>And from here, we can <a href="https://v3.docs.apostrophecms.org/guide/setting-up.html" target="_blank" rel="noreferrer">follow the regular ApostropheCMS setup guide, just like MacOS and Linux users do</a>. <strong>You can skip the part about requirements, we already have MongoDB and Node.js.</strong> Everything else is the same — just remember to keep <code>mongod</code> running and do your work inside the Ubuntu shell prompt, and you&#39;ll be good to go.</p>`,44),l=[n];function i(r,p,c,d,u,h){return o(),s("div",null,l)}const g=e(t,[["render",i]]);export{y as __pageData,g as default};
