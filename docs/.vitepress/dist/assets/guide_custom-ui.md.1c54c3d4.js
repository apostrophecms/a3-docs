import{_ as l,K as c,o as r,c as p,O as n,w as s,$ as a,k as e,a as o}from"./chunks/framework.9fa1e75e.js";const i="/assets/ui-custom-context-menu.f06d82fa.png",E=JSON.parse('{"title":"Customizing the user interface","description":"","frontmatter":{"prev":{"text":"Accessing the database directly","link":"guide/database-access.md"},"next":{"text":"Additional customization | Custom field types","link":"guide/custom-schema-field-types.md"}},"headers":[],"relativePath":"guide/custom-ui.md","filePath":"guide/custom-ui.md","lastUpdated":1690289066000}'),d={name:"guide/custom-ui.md"},y=a('<h1 id="customizing-the-user-interface" tabindex="-1">Customizing the user interface <a class="header-anchor" href="#customizing-the-user-interface" aria-label="Permalink to &quot;Customizing the user interface&quot;">â€‹</a></h1><p>This guide focuses on how to customize Apostrophe&#39;s administrative user interface, or &quot;admin UI.&quot; The built-in functionality covers most situations, but sometimes you&#39;ll want to add or change functionality.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><ul><li>Altering the UI should be done rarely and carefully. When possible, add new functionality like custom schema field types and custom manager view columns. Avoid overriding components entirely unless absolutely necessary.</li><li>Overriding a UI component prevents the project from benefiting from future UI improvements and bug fixes related to that component.</li><li>Make sure there is not a better way to achieve the desired goal. This includes <a href="https://chat.apostrophecms.org" target="_blank" rel="noreferrer">asking for help in Discord</a> and <a href="https://portal.productboard.com/apostrophecms/1-product-roadmap/tabs/1-under-consideration" target="_blank" rel="noreferrer">requesting</a> or <a href="https://github.com/apostrophecms/apostrophe/blob/main/CONTRIBUTING.md#apostrophecms-contribution-guide" target="_blank" rel="noreferrer">contributing</a> new features for the core.</li><li>At some point during the lifetime of Apostrophe 3.x we intend to migrate to Vue.js 3.x. We will do so with as much backwards compatibility as possible and make the community aware of the timeline, but when coding custom admin UI components it must be understood that minor changes may be necessary in the future.</li></ul></div><h2 id="apostrophe-admin-ui-file-structure" tabindex="-1">Apostrophe admin UI file structure <a class="header-anchor" href="#apostrophe-admin-ui-file-structure" aria-label="Permalink to &quot;Apostrophe admin UI file structure&quot;">â€‹</a></h2><p>Apostrophe&#39;s admin UI is implemented with Vue.js. It is built from many <code>.vue</code> files across various Apostrophe modules. These are typically found in Apostrophe core, but they can be anywhere in the project. This means that we can introduce our own Vue components to the admin UI just by adding <code>.vue</code> files to the <code>ui/apos/components</code> subdirectory of any Apostrophe module. As explained below, it is also possible to override existing components by supplying a component with the same name.</p><h2 id="rebuilding-the-ui-when-we-make-changes" tabindex="-1">Rebuilding the UI when we make changes <a class="header-anchor" href="#rebuilding-the-ui-when-we-make-changes" aria-label="Permalink to &quot;Rebuilding the UI when we make changes&quot;">â€‹</a></h2><p>For performance reasons, Apostrophe projects are not configured to automatically rebuild the admin UI every time your code changes. This makes sense because in most projects there is no custom admin UI code, and it takes time to build.</p><p>However we can &quot;opt in&quot; to rebuilding the UI on every code change, like this:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">APOS_DEV</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span></code></pre></div><p>For convenience, you may wish to set this environment variable for the lifetime of your terminal session:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> APOS_DEV</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span></code></pre></div><p>Of course the admin UI is always rebuilt when deploying. No special changes or environment settings are needed for production use.</p><h2 id="registering-custom-field-types" tabindex="-1">Registering custom field types <a class="header-anchor" href="#registering-custom-field-types" aria-label="Permalink to &quot;Registering custom field types&quot;">â€‹</a></h2><p>Apostrophe&#39;s <a href="./content-schema.html">schema field types</a> cover many situations, but we might wish to add a new one.</p><p>Since it is a larger topic that touches on more than just UI, we&#39;ve created a <a href="/guide/custom-schema-field-types.html">separate article on how to add a custom field type</a>. However note that you will find it easier to follow the remainder of this article if you read that article first.</p><h2 id="adding-custom-columns-to-the-piece-type-manager" tabindex="-1">Adding custom columns to the piece type manager <a class="header-anchor" href="#adding-custom-columns-to-the-piece-type-manager" aria-label="Permalink to &quot;Adding custom columns to the piece type manager&quot;">â€‹</a></h2><p>Another common extension is a custom column for the piece type manager. By default the manager modal displays the title, certain flags, and the last time the piece was updated. We can extend this to display our custom star ratings.</p><h3 id="implementing-the-server-side-part" tabindex="-1">Implementing the server-side part <a class="header-anchor" href="#implementing-the-server-side-part" aria-label="Permalink to &quot;Implementing the server-side part&quot;">â€‹</a></h3><p>Let&#39;s look at a simple piece type module called <code>review</code> that takes advantage of the <a href="/guide/custom-schema-field-types.html"><code>starRating</code> field type we define in a separate article</a>. We&#39;ll add a <code>rating</code> field to the schema for the piece type, and also add a column to display it in the manager modal:</p>',19),D=e("div",{class:"language-js"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"js"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"module.exports"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"extend"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"@apostrophecms/piece-type"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"fields"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"add"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#F07178"}},"rating"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"        "),e("span",{style:{color:"#F07178"}},"type"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"starRating"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"        "),e("span",{style:{color:"#F07178"}},"label"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"Star Rating"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"        "),e("span",{style:{color:"#F07178"}},"required"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#FF9CAC"}},"true")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"},")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"columns"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},'// ðŸ‘‡ Columns are a "cascade" just like fields,')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},'// we have an "add" property with a subproperty')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// for each column")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"add"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#F07178"}},"rating"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"        "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// ðŸ‘‡ Each column has a label property and a")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"        "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// component property. The component name must")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"        "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// exist as a Vue component")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"        "),e("span",{style:{color:"#F07178"}},"label"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"Rating"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"        "),e("span",{style:{color:"#F07178"}},"component"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"ColumnStarRating"),e("span",{style:{color:"#89DDFF"}},"'")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"};")])])])],-1),u=e("h3",{id:"implementing-the-browser-side-part",tabindex:"-1"},[o("Implementing the browser-side part "),e("a",{class:"header-anchor",href:"#implementing-the-browser-side-part","aria-label":'Permalink to "Implementing the browser-side part"'},"â€‹")],-1),m=e("p",null,[o("This code makes reference to a Vue component, "),e("code",null,"ColumnStarRating"),o(", that doesn't exist yet. Next we'll introduce that component:")],-1),h=e("div",{class:"language-js"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"js"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"::: v"),e("span",{style:{color:"#89DDFF"}},"-"),e("span",{style:{color:"#A6ACCD"}},"pre")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"template"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"p")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#C792EA"}},"class"),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"apos-table__cell-field"),e("span",{style:{color:"#89DDFF"}},'"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},'    :class="`apos-table__cell-field--${header.name}`"')]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"  >")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}}," "),e("span",{style:{color:"#C792EA"}},"v-if"),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"hasValue"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}}," "),e("span",{style:{color:"#C792EA"}},"v-for"),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"index in 5"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#89DDFF"}},' :key="index" '),e("span",{style:{color:"#C792EA"}},"class"),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#C3E88D"}},"rating"),e("span",{style:{color:"#89DDFF"}},'"'),e("span",{style:{color:"#89DDFF"}},">{{"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#F07178"}},"isActive"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"index"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#A6ACCD"}}," ? 'â˜†' : 'â˜…' "),e("span",{style:{color:"#89DDFF"}},"}}</"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"</"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}}," "),e("span",{style:{color:"#C792EA"}},"v-else"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      None")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"</"),e("span",{style:{color:"#F07178"}},"span"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"</"),e("span",{style:{color:"#F07178"}},"p"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"</"),e("span",{style:{color:"#F07178"}},"template"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"}),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"<"),e("span",{style:{color:"#F07178"}},"script"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"import AposCellMixin from 'Modules/@apostrophecms/ui/mixins/AposCellMixin';")]),o(`
`),e("span",{class:"line"}),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"export default "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  name: "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"ColumnStarRating"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  mixins: [ AposCellMixin ]"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  computed: "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"hasValue"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"this."),e("span",{style:{color:"#82AAFF"}},"get"),e("span",{style:{color:"#F07178"}},"("),e("span",{style:{color:"#89DDFF"}},"this."),e("span",{style:{color:"#A6ACCD"}},"header"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#A6ACCD"}},"name"),e("span",{style:{color:"#F07178"}},") "),e("span",{style:{color:"#89DDFF"}},"!="),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"null;")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"},")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  methods: "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"isActive"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"index"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD"}},"index"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"<="),e("span",{style:{color:"#F07178"}}," ("),e("span",{style:{color:"#89DDFF"}},"this."),e("span",{style:{color:"#82AAFF"}},"get"),e("span",{style:{color:"#F07178"}},"("),e("span",{style:{color:"#89DDFF"}},"this."),e("span",{style:{color:"#A6ACCD"}},"header"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#A6ACCD"}},"name"),e("span",{style:{color:"#F07178"}},") "),e("span",{style:{color:"#89DDFF"}},"||"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#F78C6C"}},"0"),e("span",{style:{color:"#F07178"}},")"),e("span",{style:{color:"#89DDFF"}},";")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}"),e("span",{style:{color:"#A6ACCD"}},";")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"</"),e("span",{style:{color:"#F07178"}},"script"),e("span",{style:{color:"#89DDFF"}},">")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"::: v"),e("span",{style:{color:"#89DDFF"}},"-"),e("span",{style:{color:"#A6ACCD"}},"pre")])])])],-1),F=a('<p>While the Vue component could be placed in any module, it makes the most sense to group it in the <code>star-range-field</code> module because it might be used as a column in any piece type, not just a <code>review</code>.</p><p>This component uses <code>AposCellMixin</code> to do two important things:</p><ul><li>The component gains access to the configuration of the column by accessing the <code>header</code> prop, which is automatically declared by the mixin.</li><li>The component can fetch properties from the piece by invoking <code>this.get</code> with any property name. Following Apostrophe&#39;s convention this method automatically fetches from the published version of the piece if it exists, otherwise from the draft.</li></ul><h2 id="overriding-standard-vue-js-components-by-name" tabindex="-1">Overriding standard Vue.js components by name <a class="header-anchor" href="#overriding-standard-vue-js-components-by-name" aria-label="Permalink to &quot;Overriding standard Vue.js components by name&quot;">â€‹</a></h2><p>Most of the time we don&#39;t need to override admin UI components that ship with Apostrophe. But if we have a need, we can do so by <strong>placing a file with the same name as a standard component in the <code>ui/apos/components</code> subdirectory of a project-level module.</strong> You can also do this in a custom npm module to achieve reuse across projects.</p><p>Apostrophe will use only the last version of a component that it finds during startup. The general startup order is:</p><ol><li>Core Apostrophe modules</li><li>Installed and project-level modules, in the order they are configured in <code>app.js</code></li></ol><p>For instance, if the last module in our project&#39;s <code>app.js</code> modules list contains a <code>ui/apos/components/AposLogPadless.vue</code> file, that logo will be used in the admin bar, in place of the version that is normally loaded from Apostrophe core or in any module configured earlier.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>For more information about the patterns used, props provided and APIs needed to override an existing core component, it&#39;s necessary to study the source code of the original.</p></div><h2 id="overriding-standard-vue-js-components-through-configuration" tabindex="-1">Overriding standard Vue.js components through configuration <a class="header-anchor" href="#overriding-standard-vue-js-components-through-configuration" aria-label="Permalink to &quot;Overriding standard Vue.js components through configuration&quot;">â€‹</a></h2><p>There can be only one <code>AposDocsManager</code> component definition in a project, but sometimes we need different behavior for a specific piece type. We could work around this by overriding a core component and adding conditional logic, but this results in code that is hard to maintain, and also means we are stuck maintaining a copy of a complex component and missing out on bug fixes and improvements. It would be better to <strong>specify a different, custom component name to be used</strong> to manage a particular piece type.</p><p>Here is an example of how to do that:</p>',12),A=e("div",{class:"language-js"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"js"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"module.exports"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"extend"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"@apostrophecms/piece-type"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"options"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"components"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"      "),e("span",{style:{color:"#F07178"}},"managerModal"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"AnnouncementManager"),e("span",{style:{color:"#89DDFF"}},"'")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),C=a('<p>With this configuration, Apostrophe will look for a Vue.js component called <code>AnnouncementManager</code> when the user selects &quot;Announcements&quot; from the admin bar, bypassing <code>AposDocManager</code>.</p><p>As for the actual Vue.js code, we would place that in <code>modules/announcement/ui/apos/components/AnnouncementManager.vue</code>.</p><p>Of course there are other components that can be overridden in this way, and the list is growing over time. Here are the components that can currently be overridden through configuration:</p><table><thead><tr><th>Module</th><th>Option</th><th>Default</th></tr></thead><tbody><tr><td><code>@apostrophecms/piece-type</code></td><td><code>components.managerModal</code></td><td><code>AposDocsManager</code></td></tr><tr><td><code>@apostrophecms/piece-type</code></td><td><code>components.editorModal</code></td><td><code>AposDocEditor</code></td></tr><tr><td><code>@apostrophecms/page</code></td><td><code>components.managerModal</code></td><td><code>AposPagesManager</code></td></tr><tr><td><code>@apostrophecms/page</code></td><td><code>components.editorModal</code></td><td><code>AposDocEditor</code></td></tr><tr><td><code>@apostrophecms/widget-type</code></td><td><code>components.widgetEditor</code></td><td><code>AposWidgetEditor</code></td></tr><tr><td><code>@apostrophecms/widget-type</code></td><td><code>components.widget</code></td><td><code>AposWidget</code></td></tr></tbody></table><p>For readability&#39;s sake, a <code>.</code> is used in the table above to separate sub-properties of <code>options</code> (see the example above for what the actual configuration looks like). If an option exists for <code>@apostrophecms/piece-type</code> it can be used for any module that extends it.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Since the type of an existing page can be changed, there is only one manager modal and only one editor modal for all pages, and those component names are configured on the <code>@apostrophecms/page</code> module. Piece and widget types can have their own type-specifc overrides.</p><p>If an option ends in <code>Modal</code>, the component is required to embed the <code>AposModal</code> component. For examples, look at the source code of the default components listed above.</p><p>The <code>AposWidgetEditor</code> component already provides a modal dialog box in which to edit the schema of any widget, so we won&#39;t need to configure a replacement unless we want to support editing directly on the page. <code>AposRichTextWidgetEditor</code> is an example of how to do this.</p><p>The <code>AposWidget</code> component has <strong>nothing to do with a typical site visitor experience.</strong> It is used only when displaying our widget while the page is in edit mode. While overriding this component is rare, the <code>@apostrophecms/rich-text-widget</code> module does so to provide a &quot;click the text to edit&quot; experience for rich text widgets. If you&#39;re just trying to enhance your widget with frontend JavaScript, you should write a <a href="./custom-widgets.html#client-side-javascript-for-widgets">widget player</a> instead.</p><p>Before you override an editor modal, consider <a href="/guide/custom-schema-field-types.html">adding a custom schema field type</a> instead.</p></div><h2 id="adding-custom-context-menu-items" tabindex="-1">Adding custom context menu items <a class="header-anchor" href="#adding-custom-context-menu-items" aria-label="Permalink to &quot;Adding custom context menu items&quot;">â€‹</a></h2><p>Apostrophe offers a context menu that can be used to carry out certain operations on a document, such as &#39;preview&#39;, &#39;duplicate&#39;, and so on. We can add custom context menu items (edit mode) from within any module, targeting any Vue component that implements <code>AposModal</code>. The menu registration should happen in the initialization phase.</p><p>Here is an example of how to add custom context menu item labeled &quot;My Menu Item&quot;.</p><p><img src="'+i+'" alt="A custom context menu item &#39;My Menu Item&#39; in the Piece Editor Modal"></p>',10),g=e("div",{class:"language-js"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"js"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"module.exports"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"="),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"extend"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"@apostrophecms/piece-type"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"options"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"label"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"Article"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"    "),e("span",{style:{color:"#F07178"}},"pluralLabel"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"Articles"),e("span",{style:{color:"#89DDFF"}},"'")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#89DDFF"}},"},")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#A6ACCD"}},"  "),e("span",{style:{color:"#F07178"}},"init"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"self"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#A6ACCD"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#A6ACCD"}},"self"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#A6ACCD"}},"apos"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#A6ACCD"}},"doc"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#82AAFF"}},"addContextOperation"),e("span",{style:{color:"#F07178"}},"("),e("span",{style:{color:"#A6ACCD"}},"self"),e("span",{style:{color:"#89DDFF"}},"."),e("span",{style:{color:"#A6ACCD"}},"name"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      context"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"update"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      action"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"myUniqueAction"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      label"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"My Menu Item"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},",")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      modal"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#C3E88D"}},"MyModalComponent"),e("span",{style:{color:"#89DDFF"}},"'")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}"),e("span",{style:{color:"#F07178"}},")"),e("span",{style:{color:"#89DDFF"}},";")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"}")]),o(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),f=a('<div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Do not use core actions as your <code>action</code> property value - this would lead to unpredictable results and generally broken UI. You may consult what the core actions are in the <a href="https://github.com/apostrophecms/apostrophe/blob/main/modules/%40apostrophecms/doc-type/ui/apos/components/AposDocContextMenu.vue" target="_blank" rel="noreferrer">AposDocContextMenu component</a> (computed property <code>menu</code>).</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>The current API supports only <code>context: &quot;update&quot;</code> (the custom menu items are available for previously saved documents).</li><li>The <code>action</code> property should be globally unique.</li><li>Overriding the same <code>action</code> is possible (the last wins).</li><li>You may mark the action as &quot;dangerous&quot; via an optional property <code>modifiers: [ &quot;danger&quot; ]</code>.</li><li>An additional optional boolean property <code>manuallyPublished</code> is supported. When set to true, the custom menu item is available only for document types that do not have the <code>autopublish: true</code> or <code>localized: false</code> options set.</li></ul></div><h2 id="adding-custom-login-requirements" tabindex="-1">Adding custom login requirements <a class="header-anchor" href="#adding-custom-login-requirements" aria-label="Permalink to &quot;Adding custom login requirements&quot;">â€‹</a></h2><p>In some cases we might wish to enhance Apostrophe&#39;s login form with additional, custom steps.</p><p>This too is a larger topic that touches on more than just UI, so we&#39;ve created a <a href="/guide/custom-login-requirements.html">separate article on how to add a custom login requirement</a>.</p><h2 id="editing-custom-widgets-in-context" tabindex="-1">Editing custom widgets in context <a class="header-anchor" href="#editing-custom-widgets-in-context" aria-label="Permalink to &quot;Editing custom widgets in context&quot;">â€‹</a></h2><p>While most widgets are edited most conveniently via the standard dialog box that appears when the edit button is clicked, some can be edited effectively &quot;in context&quot; right on the page. The standard rich text widget is a good example.</p><p>To learn how to implement this pattern for a custom widget, check out this <a href="/guide/editing-custom-widgets-in-context.html">separate article on how to edit custom widgets in context</a>.</p>',8);function b(w,v,_,x,k,q){const t=c("AposCodeBlock");return r(),p("div",null,[y,n(t,null,{caption:s(()=>[o(" modules/review/index.js ")]),default:s(()=>[D,o()]),_:1}),u,m,n(t,null,{caption:s(()=>[o(" modules/star-range-field/ui/apos/components/ColumnStarRating.vue ")]),default:s(()=>[h,o()]),_:1}),F,n(t,null,{caption:s(()=>[o(" modules/announcement/index.js ")]),default:s(()=>[A,o()]),_:1}),C,n(t,null,{caption:s(()=>[o(" modules/article/index.js ")]),default:s(()=>[g,o()]),_:1}),f])}const T=l(d,[["render",b]]);export{E as __pageData,T as default};
