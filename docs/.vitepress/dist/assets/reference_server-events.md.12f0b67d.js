import{_ as n,K as r,o as c,c as p,k as e,O as a,w as l,$ as t,a as s}from"./chunks/framework.9fa1e75e.js";const rs=JSON.parse('{"title":"Server-side events","description":"","frontmatter":{"sidebarDepth":2,"prev":{"text":"Module options","link":"reference/module-api/module-options.md"},"next":{"text":"Query builders","link":"reference/query-builders.md"}},"headers":[],"relativePath":"reference/server-events.md","filePath":"reference/server-events.md","lastUpdated":1690289066000}'),i={name:"reference/server-events.md"},F=t('<h1 id="server-side-events" tabindex="-1">Server-side events <a class="header-anchor" href="#server-side-events" aria-label="Permalink to &quot;Server-side events&quot;">​</a></h1><p>Each section below includes server-side events emitted by a particular module <em>and <a href="/guide/modules.html#module-inheritance">modules that extend them</a></em> (e.g., all piece types emit the events listed for <code>@apostrophecms/piece-type</code>). See the <a href="/guide/server-events.html">server-side events guide</a> for more detail on using events.</p><p>Code block examples represent the <a href="/reference/module-api/module-overview.html#handlers-self"><code>handlers</code></a> section of a module.</p>',3),y={class:"info custom-block"},d=e("p",{class:"custom-block-title"},"INFO",-1),D=e("p",null,[s("As a reminder, when referencing an event in the "),e("code",null,"handlers"),s(" section "),e("em",null,"from within the module that emits it"),s(" we only need to use the event name. This includes events emitted by functionality that a module inherits (e.g., all piece type modules emit events from "),e("code",null,"@apostrophecms/piece-type"),s(" functionality).")],-1),h=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// 'beforeSave' is an event the @apostrophecms/user module emits.")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeSave"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),u=e("p",null,[s("When naming an event emitted "),e("em",null,"by a different module"),s(", the event name must be prefixed with the name of the module that emitted it followed by a colon.")],-1),m=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// This team module is specifically listening for 'beforeSave' on")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"    "),e("span",{style:{color:"#676E95","font-style":"italic"}},"// the @apostrophecms/user module.")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"@apostrophecms/user:beforeSave"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),_=t('<h2 id="core-app-events" tabindex="-1">Core app events <a class="header-anchor" href="#core-app-events" aria-label="Permalink to &quot;Core app events&quot;">​</a></h2><p>These events are emitted by the primary Apostrophe app. Reference these events with the prefix <code>apostrophe:</code> (e.g., <code>apostrophe:ready</code>).</p><h3 id="destroy" tabindex="-1"><code>destroy</code> <a class="header-anchor" href="#destroy" aria-label="Permalink to &quot;`destroy`&quot;">​</a></h3><p>Triggered when the app&#39;s <code>destroy</code> method is called. Most commonly used in tests. Your handlers should clean up any custom <code>setTimeout</code> or <code>setInterval</code> timers and/or open socket or database connections you have created. You should not &quot;destroy&quot; your actual website content. Just close any remaining open connections, timeouts, etc.</p><p>There is no data included with the event for handlers.</p>',5),f=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"apostrophe:destroy"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),A=e("h3",{id:"modulesregistered",tabindex:"-1"},[e("code",null,"modulesRegistered"),s(),e("a",{class:"header-anchor",href:"#modulesregistered","aria-label":'Permalink to "`modulesRegistered`"'},"​")],-1),C=e("p",null,[s("Triggered during startup after all modules are registered and their "),e("code",null,"init"),s(" functions run. This is the last opportunity to adjust module configuration (e.g., field schema) in response to other active modules.")],-1),b=e("p",null,[s("There is no data included with the event for handlers. Previously named "),e("code",null,"modulesReady"),s(", which still works as an alias.")],-1),g=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"apostrophe:modulesRegistered"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),v=e("h3",{id:"ready",tabindex:"-1"},[e("code",null,"ready"),s(),e("a",{class:"header-anchor",href:"#ready","aria-label":'Permalink to "`ready`"'},"​")],-1),T=e("p",null,[s("Invoked after all "),e("code",null,"apostrophe:modulesRegistered"),s(" handlers and start up functions have completed. All modules are now completely ready for work.")],-1),q=e("p",null,[s("There is no data included with the event for handlers. Previously named "),e("code",null,"afterInit"),s(", which still works as an alias.")],-1),P=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"apostrophe:ready"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),x=t('<h3 id="run" tabindex="-1"><code>run</code> <a class="header-anchor" href="#run" aria-label="Permalink to &quot;`run`&quot;">​</a></h3><p><strong>Not intended for project use.</strong> If Apostrophe was invoked as a command line task, Apostrophe&#39;s task module responds to this event by executing the task. Otherwise, Apostrophe&#39;s Express module responds to this event by listening for connections. If your goal is to do something just before that happens, you should listen for <code>apostrophe:ready</code> instead.</p><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>isTask</code>: A boolean value indicating whether the process was started as an <a href="/reference/module-api/module-overview.html#tasks-self">Apostrophe task</a>.</li></ul>',4),k=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"apostrophe:run"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"isTask"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),j=t('<h2 id="apostrophecms-db-events" tabindex="-1"><code>@apostrophecms/db</code> events <a class="header-anchor" href="#apostrophecms-db-events" aria-label="Permalink to &quot;`@apostrophecms/db` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/db</code> module.</p><h3 id="reset" tabindex="-1"><code>reset</code> <a class="header-anchor" href="#reset" aria-label="Permalink to &quot;`reset`&quot;">​</a></h3><p>Invoked after all collections are dropped from the database in the <code>@apostrophecms/db:reset</code> command line task.</p><p>There is no data included with the event for handlers.</p>',5),S=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"reset"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),I=t('<h2 id="apostrophecms-doc-events" tabindex="-1"><code>@apostrophecms/doc</code> events <a class="header-anchor" href="#apostrophecms-doc-events" aria-label="Permalink to &quot;`@apostrophecms/doc` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/doc</code> module.</p><h3 id="fixuniqueerror" tabindex="-1"><code>fixUniqueError</code> <a class="header-anchor" href="#fixuniqueerror" aria-label="Permalink to &quot;`fixUniqueError`&quot;">​</a></h3><p>Triggered when a unique key error is thrown by MongoDB. Apostrophe uses this to modify the slug property to make it unique.</p><h4 id="parameters-1" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The database document that triggered the error</li></ul>',6),E=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"fixUniqueError"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),N=e("h3",{id:"afterreplicate",tabindex:"-1"},[e("code",null,"afterReplicate"),s(),e("a",{class:"header-anchor",href:"#afterreplicate","aria-label":'Permalink to "`afterReplicate`"'},"​")],-1),w=e("p",null,[s("Triggered after Apostrophe automatically replicates certain documents across all locales, including parked pages and piece types with the "),e("code",null,"replicate: true"),s(" option. This runs once during startup.")],-1),V=e("p",null,"There is no data included with the event for handlers.",-1),R=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterReplicate"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),U=t('<h3 id="afterallmodesdeleted" tabindex="-1"><code>afterAllModesDeleted</code> <a class="header-anchor" href="#afterallmodesdeleted" aria-label="Permalink to &quot;`afterAllModesDeleted`&quot;">​</a></h3><p>Triggered after Apostrophe automatically deletes all modes of a certain document. If the doc type module has the <code>localized: false</code> setting this event will not be emitted.</p><h4 id="parameters-2" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The draft mode data of the document being deleted</li><li><code>options</code>: Any options passed to the <code>delete</code> method of the corresponding document type</li></ul>',4),M=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterAllModesDeleted"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),B=t('<h2 id="apostrophecms-doc-type-events" tabindex="-1"><code>@apostrophecms/doc-type</code> events <a class="header-anchor" href="#apostrophecms-doc-type-events" aria-label="Permalink to &quot;`@apostrophecms/doc-type` events&quot;">​</a></h2><p>These events are emitted by <strong>all page type and piece type modules</strong> since they extend <code>@apostrophecms/doc-type</code>. In most cases it will be best to watch for the event from a piece type or page type module rather than the doc type module.</p><p>If specifically watching events on <code>@apostrophecms/doc-type</code>, as opposed to modules that extend it, <strong>it will normally be important to check the <code>type</code> of the document in question</strong> before proceeding with the handler&#39;s work.</p><h3 id="beforeinsert" tabindex="-1"><code>beforeInsert</code> <a class="header-anchor" href="#beforeinsert" aria-label="Permalink to &quot;`beforeInsert`&quot;">​</a></h3><p>Triggered just <em>before</em> Apostrophe inserts a document into the database for the first time.</p><h4 id="parameters-3" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-3" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being inserted into the database</li><li><code>options</code>: Any options passed from the <code>insert</code> method</li></ul>',7),z=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeInsert"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),$=t('<h3 id="beforeupdate" tabindex="-1"><code>beforeUpdate</code> <a class="header-anchor" href="#beforeupdate" aria-label="Permalink to &quot;`beforeUpdate`&quot;">​</a></h3><p>Triggered just <em>before</em> Apostrophe updates an existing document in the database.</p><h4 id="parameters-4" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-4" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being updated in the database</li><li><code>options</code>: Any options passed from the <code>update</code> method</li></ul>',4),L=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeUpdate"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),O=t('<h3 id="beforesave" tabindex="-1"><code>beforeSave</code> <a class="header-anchor" href="#beforesave" aria-label="Permalink to &quot;`beforeSave`&quot;">​</a></h3><p>Triggered just <em>before</em> Apostrophe either inserts <em>or</em> updates a document. Invoked immediately after <code>beforeInsert</code> and <code>beforeUpdate</code> in their respective cases.</p><h4 id="parameters-5" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-5" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being saved to the database</li><li><code>options</code>: Any options passed from the saving method</li></ul>',4),Q=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeSave"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),J=t('<h3 id="afterinsert" tabindex="-1"><code>afterInsert</code> <a class="header-anchor" href="#afterinsert" aria-label="Permalink to &quot;`afterInsert`&quot;">​</a></h3><p>Triggered just <em>after</em> Apostrophe inserts a document into the database for the first time. The <code>doc._id</code> property is available at this point.</p><h4 id="parameters-6" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-6" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being inserted into the database</li><li><code>options</code>: Any options passed from the <code>insert</code> method</li></ul>',4),Y=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterInsert"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),K=t('<h3 id="afterupdate" tabindex="-1"><code>afterUpdate</code> <a class="header-anchor" href="#afterupdate" aria-label="Permalink to &quot;`afterUpdate`&quot;">​</a></h3><p>Triggered just <em>after</em> Apostrophe updates an existing document in the database.</p><h4 id="parameters-7" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-7" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being updated in the database</li><li><code>options</code>: Any options passed from the <code>update</code> method</li></ul>',4),W=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterUpdate"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),G=t('<h3 id="aftersave" tabindex="-1"><code>afterSave</code> <a class="header-anchor" href="#aftersave" aria-label="Permalink to &quot;`afterSave`&quot;">​</a></h3><p>Triggered just <em>after</em> Apostrophe either inserts <em>or</em> updates a document. Invoked immediately after <code>afterInsert</code> and <code>afterUpdate</code> in their respective cases.</p><h4 id="parameters-8" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-8" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document data being saved to the database</li><li><code>options</code>: Any options passed from the saving method</li></ul>',4),H=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterSave"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),X=t('<h3 id="beforedelete" tabindex="-1"><code>beforeDelete</code> <a class="header-anchor" href="#beforedelete" aria-label="Permalink to &quot;`beforeDelete`&quot;">​</a></h3><p>Triggered just <em>before</em> Apostrophe permanently deletes an existing document from the database.</p><h4 id="parameters-9" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-9" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document being deleted from the database</li><li><code>options</code>: Any options passed from the deleting method</li></ul>',4),Z=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeDelete"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ee=t('<h3 id="afterdelete" tabindex="-1"><code>afterDelete</code> <a class="header-anchor" href="#afterdelete" aria-label="Permalink to &quot;`afterDelete`&quot;">​</a></h3><p>Triggered just <em>after</em> Apostrophe permanently deletes an existing document from the database.</p><h4 id="parameters-10" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-10" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document being deleted from the database</li><li><code>options</code>: Any options passed from the deleting method</li></ul>',4),se=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterDelete"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"options"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),le=t('<h3 id="afterarchive" tabindex="-1"><code>afterArchive</code> <a class="header-anchor" href="#afterarchive" aria-label="Permalink to &quot;`afterArchive`&quot;">​</a></h3><p>Triggered after a document is archived when saving it.</p><h4 id="parameters-11" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-11" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document being archived</li></ul>',4),oe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterArchive"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ae=t('<h3 id="afterrescue" tabindex="-1"><code>afterRescue</code> <a class="header-anchor" href="#afterrescue" aria-label="Permalink to &quot;`afterRescue`&quot;">​</a></h3><p>Triggered after a document is rescued (the opposite of archiving) when saving it.</p><h4 id="parameters-12" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-12" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>doc</code>: The document being rescued</li></ul>',4),te=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterRescue"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"doc"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ne=t('<h3 id="beforepublish" tabindex="-1"><code>beforePublish</code> <a class="header-anchor" href="#beforepublish" aria-label="Permalink to &quot;`beforePublish`&quot;">​</a></h3><p>Triggered just <em>before</em> a draft document is published.</p><h4 id="parameters-13" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-13" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>data</code>: An object containing the following properties: <ul><li><code>draft</code>: The draft document data</li><li><code>published</code>: The document data as it will be published</li><li><code>options</code>: Any options passed from the <code>publish</code> method</li><li><code>firstTime</code>: A boolean value, <code>true</code> if the document has never been published before</li></ul></li></ul>',4),re=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforePublish"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ce=t('<h3 id="afterpublish" tabindex="-1"><code>afterPublish</code> <a class="header-anchor" href="#afterpublish" aria-label="Permalink to &quot;`afterPublish`&quot;">​</a></h3><p>Triggered just <em>after</em> a draft document is published.</p><h4 id="parameters-14" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-14" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>data</code>: An object containing the following properties: <ul><li><code>draft</code>: The draft document data</li><li><code>published</code>: The document data as it will be published</li><li><code>options</code>: Any options passed from the <code>publish</code> method</li><li><code>firstTime</code>: A boolean value, <code>true</code> if the document has never been published before</li></ul></li></ul>',4),pe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterPublish"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ie=t('<h3 id="afterrevertdrafttopublished" tabindex="-1"><code>afterRevertDraftToPublished</code> <a class="header-anchor" href="#afterrevertdrafttopublished" aria-label="Permalink to &quot;`afterRevertDraftToPublished`&quot;">​</a></h3><p>Triggered after a draft document is reverted to the most recent published state. This is separate from the undo and redo features in the user interface.</p><h4 id="parameters-15" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-15" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>result</code>: An object containing the following property: <ul><li><code>draft</code>: The <em>new</em> draft document</li></ul></li></ul>',4),Fe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterRevertDraftToPublished"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"result"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ye=t('<h3 id="afterrevertpublishedtoprevious" tabindex="-1"><code>afterRevertPublishedToPrevious</code> <a class="header-anchor" href="#afterrevertpublishedtoprevious" aria-label="Permalink to &quot;`afterRevertPublishedToPrevious`&quot;">​</a></h3><p>Triggered after a published document is reverted to the most recent &quot;previous&quot; state (the previous published version). This is separate from the undo and redo features in the user interface.</p><h4 id="parameters-16" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-16" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>result</code>: An object containing the following property: <ul><li><code>published</code>: The <em>new</em> published document</li></ul></li></ul>',4),de=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterRevertPublishedToPrevious"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"result"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),De=t('<h2 id="apostrophecms-express-events" tabindex="-1"><code>@apostrophecms/express</code> events <a class="header-anchor" href="#apostrophecms-express-events" aria-label="Permalink to &quot;`@apostrophecms/express` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/express</code> module.</p><h3 id="afterlisten" tabindex="-1"><code>afterListen</code> <a class="header-anchor" href="#afterlisten" aria-label="Permalink to &quot;`afterListen`&quot;">​</a></h3><p>Triggered after the Express module begins listening for connections.</p><p>There is no data included with the event for handlers.</p>',5),he=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterListen"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ue=e("h3",{id:"compileroutes",tabindex:"-1"},[e("code",null,"compileRoutes"),s(),e("a",{class:"header-anchor",href:"#compileroutes","aria-label":'Permalink to "`compileRoutes`"'},"​")],-1),me=e("p",null,[e("strong",null,"Not intended for project use."),s(" Triggered prior to middleware and route registration. Used to get all modules to compile their respective routes for registration. To add custom routes, configure the appropriate properties of your module, (e.g., "),e("code",null,"apiRoutes"),s(", "),e("code",null,"restApiRoutes"),s(").")],-1),_e=e("p",null,"There is no data included with the event for handlers.",-1),fe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"compileRoutes"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Ae=t('<h2 id="apostrophecms-login-events" tabindex="-1"><code>@apostrophecms/login</code> events <a class="header-anchor" href="#apostrophecms-login-events" aria-label="Permalink to &quot;`@apostrophecms/login` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/login</code> module.</p><h3 id="deserialize" tabindex="-1"><code>deserialize</code> <a class="header-anchor" href="#deserialize" aria-label="Permalink to &quot;`deserialize`&quot;">​</a></h3><p>Triggered on every request made when a user is logged in, populating <code>req.user</code>.</p><h4 id="parameters-17" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-17" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>user</code>: The user&#39;s data from the database</li></ul>',6),Ce=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"deserialize"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"user"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),be=t('<h2 id="apostrophecms-migration-events" tabindex="-1"><code>@apostrophecms/migration</code> events <a class="header-anchor" href="#apostrophecms-migration-events" aria-label="Permalink to &quot;`@apostrophecms/migration` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/migration</code> module.</p><h3 id="after" tabindex="-1"><code>after</code> <a class="header-anchor" href="#after" aria-label="Permalink to &quot;`after`&quot;">​</a></h3><p>Triggered after all data migrations have run. The database is now in a stable state.</p><p>There is no data included with the event for handlers.</p>',5),ge=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"after"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"()"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ve=t('<h2 id="apostrophecms-page-events" tabindex="-1"><code>@apostrophecms/page</code> events <a class="header-anchor" href="#apostrophecms-page-events" aria-label="Permalink to &quot;`@apostrophecms/page` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/page</code> module.</p><h3 id="beforesend" tabindex="-1"><code>beforeSend</code> <a class="header-anchor" href="#beforesend" aria-label="Permalink to &quot;`beforeSend`&quot;">​</a></h3><p>Triggered just before a page template is rendered and sent as a response to a request. This can be a good place to adjust the data available to the template by amending <code>req.data</code>. Also see the <a href="/guide/async-components.html">async components guide</a>, as that can be a cleaner way to package code that fetches data during rendering.</p><h4 id="parameters-18" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-18" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li></ul>',6),Te=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeSend"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),qe=t('<h3 id="servequery" tabindex="-1"><code>serveQuery</code> <a class="header-anchor" href="#servequery" aria-label="Permalink to &quot;`serveQuery`&quot;">​</a></h3><p>Triggered just before the database query executes to find the best matching page for a request. This can be used to make final adjustments to the query.</p><h4 id="parameters-19" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-19" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>query</code>: The database query that will execute</li></ul>',4),Pe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"serveQuery"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"query"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),xe=e("h3",{id:"serve",tabindex:"-1"},[e("code",null,"serve"),s(),e("a",{class:"header-anchor",href:"#serve","aria-label":'Permalink to "`serve`"'},"​")],-1),ke=e("p",null,"Triggered just before Apostrophe attempts to serve a requested page.",-1),je=e("h4",{id:"parameters-20",tabindex:"-1"},[s("Parameters "),e("a",{class:"header-anchor",href:"#parameters-20","aria-label":'Permalink to "Parameters"'},"​")],-1),Se=e("ul",null,[e("li",null,[e("code",null,"req"),s(": The active request")])],-1),Ie=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"serve"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Ee=t('<h3 id="notfound" tabindex="-1"><code>notFound</code> <a class="header-anchor" href="#notfound" aria-label="Permalink to &quot;`notFound`&quot;">​</a></h3><p>Triggered when Apostrophe fails to find a matching page for a request, just before the 404 response. This is a final chance to do extra work to find a matching page and assign the URL to <code>req.redirect</code>.</p><h4 id="parameters-21" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-21" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li></ul>',4),Ne=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"notFound"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),we=t('<h2 id="apostrophecms-page-type-events" tabindex="-1"><code>@apostrophecms/page-type</code> events <a class="header-anchor" href="#apostrophecms-page-type-events" aria-label="Permalink to &quot;`@apostrophecms/page-type` events&quot;">​</a></h2><p>These events are emitted by <strong>all page type modules</strong> since they extend <code>@apostrophecms/page-type</code>. In most cases it will be best to watch for the event from a page type&#39;s module rather than the <code>@apostrophecms/page-type</code> module.</p><p>If specifically watching events on <code>@apostrophecms/page-type</code>, as opposed to modules that extend it, <strong>it will normally be important to check the <code>type</code> of the page in question</strong> before proceeding with the handler&#39;s work.</p><h3 id="beforeunpublish" tabindex="-1"><code>beforeUnpublish</code> <a class="header-anchor" href="#beforeunpublish" aria-label="Permalink to &quot;`beforeUnpublish`&quot;">​</a></h3><p>Triggered just before a page&#39;s published document is deleted, leaving only a draft document.</p><h4 id="parameters-22" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-22" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>published</code>: The published document that is about to be unpublished</li></ul>',7),Ve=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeUnpublish"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"published"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Re=t('<h3 id="beforemove" tabindex="-1"><code>beforeMove</code> <a class="header-anchor" href="#beforemove" aria-label="Permalink to &quot;`beforeMove`&quot;">​</a></h3><p>Triggered just <em>before</em> a page is moved from one position in the page tree to another.</p><h4 id="parameters-23" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-23" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>page</code>: The page being moved</li><li><code>target</code>: The page used as a target for positioning in the page tree</li><li><code>position</code>: The position to place the page in relation to the target: <code>before</code> and <code>after</code> insert the new page as a sibling of the target; <code>firstChild</code> and <code>lastChild</code> insert the new page as a child of the target</li></ul>',4),Ue=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeMove"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"page"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"target"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"position"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Me=t('<h3 id="aftermove" tabindex="-1"><code>afterMove</code> <a class="header-anchor" href="#aftermove" aria-label="Permalink to &quot;`afterMove`&quot;">​</a></h3><p>Triggered just <em>after</em> a page is moved from one position in the page tree to another.</p><h4 id="parameters-24" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-24" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>page</code>: The page being moved</li><li><code>data</code>: An object containing the following properties: <ul><li><code>originalSlug</code>: The page&#39;s slug prior to moving</li><li><code>originalPath</code>: The page&#39;s path prior to moving</li><li><code>changed</code>: An array of all pages that were changed by the move, including children of the moved page</li><li><code>target</code>: The page used as a target for positioning in the page tree</li><li><code>position</code>: The position to place the page in relation to the target</li></ul></li></ul>',4),Be=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterMove"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"page"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ze=t('<h3 id="afterconvert" tabindex="-1"><code>afterConvert</code> <a class="header-anchor" href="#afterconvert" aria-label="Permalink to &quot;`afterConvert`&quot;">​</a></h3><p>Triggered after page data is run through the schema module&#39;s <code>convert</code> method, validating its data to the page type&#39;s field schema.</p><h4 id="parameters-25" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-25" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>data</code>: The data being saved to the page, prior to schema conversion</li><li><code>page</code>: The page as it will be saved, following schema conversion</li></ul>',4),$e=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterConvert"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"page"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Le=t('<h2 id="apostrophecms-piece-type-events" tabindex="-1"><code>@apostrophecms/piece-type</code> events <a class="header-anchor" href="#apostrophecms-piece-type-events" aria-label="Permalink to &quot;`@apostrophecms/piece-type` events&quot;">​</a></h2><p>These events are emitted by <strong>all piece type modules</strong> since they extend <code>@apostrophecms/piece-type</code>. In most cases it will be best to watch for the event from a piece type&#39;s module rather than the <code>@apostrophecms/piece-type</code> module.</p><p>If specifically watching events on <code>@apostrophecms/piece-type</code>, as opposed to modules that extend it, <strong>it will normally be important to check the <code>type</code> of the piece in question</strong> before proceeding with the handler&#39;s work.</p><h3 id="beforeunpublish-1" tabindex="-1"><code>beforeUnpublish</code> <a class="header-anchor" href="#beforeunpublish-1" aria-label="Permalink to &quot;`beforeUnpublish`&quot;">​</a></h3><p>Triggered just before a piece&#39;s published document is deleted, leaving only a draft document.</p><h4 id="parameters-26" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-26" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>published</code>: The published document that is about to be unpublished</li></ul>',7),Oe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"beforeUnpublish"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"published"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Qe=t('<h3 id="afterconvert-1" tabindex="-1"><code>afterConvert</code> <a class="header-anchor" href="#afterconvert-1" aria-label="Permalink to &quot;`afterConvert`&quot;">​</a></h3><p>Triggered after piece data is run through the schema module&#39;s <code>convert</code> method, validating its data to the piece type&#39;s field schema.</p><h4 id="parameters-27" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-27" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li><li><code>data</code>: The data being saved to the piece, prior to schema conversion</li><li><code>piece</code>: The piece as it will be saved, following schema conversion</li></ul>',4),Je=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"afterConvert"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"piece"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Ye=t('<h2 id="apostrophecms-search-events" tabindex="-1"><code>@apostrophecms/search</code> events <a class="header-anchor" href="#apostrophecms-search-events" aria-label="Permalink to &quot;`@apostrophecms/search` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/search</code> module.</p><h3 id="determinetypes" tabindex="-1"><code>determineTypes</code> <a class="header-anchor" href="#determinetypes" aria-label="Permalink to &quot;`determineTypes`&quot;">​</a></h3><p>Triggered after the search module identifies the document types to include in search results. This is a chance to change the included types.</p><h4 id="parameters-28" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-28" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>types</code>: An array of document type names</li></ul>',6),Ke=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"determineTypes"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"types"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),We=t('<h3 id="beforeindex" tabindex="-1"><code>beforeIndex</code> <a class="header-anchor" href="#beforeindex" aria-label="Permalink to &quot;`beforeIndex`&quot;">​</a></h3><p>Triggered just before the search index page is served, after the page&#39;s results are stored on <code>req.data.docs</code>.</p><h4 id="parameters-29" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-29" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>req</code>: The active request</li></ul>',4),Ge=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"determineTypes"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"req"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1),He=t('<h2 id="apostrophecms-template-events" tabindex="-1"><code>@apostrophecms/template</code> events <a class="header-anchor" href="#apostrophecms-template-events" aria-label="Permalink to &quot;`@apostrophecms/template` events&quot;">​</a></h2><p>Events emitted by the <code>@apostrophecms/template</code> module.</p><h3 id="addbodydata" tabindex="-1"><code>addBodyData</code> <a class="header-anchor" href="#addbodydata" aria-label="Permalink to &quot;`addBodyData`&quot;">​</a></h3><p><strong>Not intended for project use.</strong> Triggered just before a body data object is added to a request prior to rendering a page. A module&#39;s <code>getBrowserData</code> and <code>enableBrowserData</code> are better places to work on this data in project code.</p><h4 id="parameters-30" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-30" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>bodyData</code>: The body data object as it has been constructed</li></ul>',6),Xe=e("div",{class:"language-javascript"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"javascript"),e("pre",{class:"shiki material-theme-palenight"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#82AAFF"}},"handlers"),e("span",{style:{color:"#A6ACCD"}},"(self"),e("span",{style:{color:"#89DDFF"}},","),e("span",{style:{color:"#A6ACCD"}}," options) "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#F07178"}},"addBodyData"),e("span",{style:{color:"#89DDFF"}},"'"),e("span",{style:{color:"#89DDFF"}},":"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"      "),e("span",{style:{color:"#C792EA"}},"async"),e("span",{style:{color:"#F07178"}}," handlerName"),e("span",{style:{color:"#89DDFF"}},"("),e("span",{style:{color:"#A6ACCD","font-style":"italic"}},"bodyData"),e("span",{style:{color:"#89DDFF"}},")"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"{"),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"..."),e("span",{style:{color:"#F07178"}}," "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"    "),e("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F07178"}},"  "),e("span",{style:{color:"#89DDFF"}},"};")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#89DDFF"}},"}")])])])],-1);function Ze(es,ss,ls,os,as,ts){const o=r("AposCodeBlock");return c(),p("div",null,[F,e("div",y,[d,D,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/user/index.js ")]),default:l(()=>[h,s()]),_:1}),u,a(o,null,{caption:l(()=>[s(" modules/team/index.js ")]),default:l(()=>[m,s()]),_:1})]),_,a(o,null,{caption:l(()=>[s(" modules/any-module/index.js ")]),default:l(()=>[f,s()]),_:1}),A,C,b,a(o,null,{caption:l(()=>[s(" modules/any-module/index.js ")]),default:l(()=>[g,s()]),_:1}),v,T,q,a(o,null,{caption:l(()=>[s(" modules/any-module/index.js ")]),default:l(()=>[P,s()]),_:1}),x,a(o,null,{caption:l(()=>[s(" modules/any-module/index.js ")]),default:l(()=>[k,s()]),_:1}),j,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/db/index.js ")]),default:l(()=>[S,s()]),_:1}),I,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc/index.js ")]),default:l(()=>[E,s()]),_:1}),N,w,V,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc/index.js ")]),default:l(()=>[R,s()]),_:1}),U,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc/index.js ")]),default:l(()=>[M,s()]),_:1}),B,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[z,s()]),_:1}),$,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[L,s()]),_:1}),O,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[Q,s()]),_:1}),J,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[Y,s()]),_:1}),K,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[W,s()]),_:1}),G,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[H,s()]),_:1}),X,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[Z,s()]),_:1}),ee,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[se,s()]),_:1}),le,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[oe,s()]),_:1}),ae,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[te,s()]),_:1}),ne,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[re,s()]),_:1}),ce,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[pe,s()]),_:1}),ie,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[Fe,s()]),_:1}),ye,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/doc-type/index.js ")]),default:l(()=>[de,s()]),_:1}),De,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/express/index.js ")]),default:l(()=>[he,s()]),_:1}),ue,me,_e,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/express/index.js ")]),default:l(()=>[fe,s()]),_:1}),Ae,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/login/index.js ")]),default:l(()=>[Ce,s()]),_:1}),be,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/migration/index.js ")]),default:l(()=>[ge,s()]),_:1}),ve,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Te,s()]),_:1}),qe,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Pe,s()]),_:1}),xe,ke,je,Se,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Ie,s()]),_:1}),Ee,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Ne,s()]),_:1}),we,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Ve,s()]),_:1}),Re,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Ue,s()]),_:1}),Me,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[Be,s()]),_:1}),ze,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/page/index.js ")]),default:l(()=>[$e,s()]),_:1}),Le,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/piece-type/index.js ")]),default:l(()=>[Oe,s()]),_:1}),Qe,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/piece-type/index.js ")]),default:l(()=>[Je,s()]),_:1}),Ye,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/search/index.js ")]),default:l(()=>[Ke,s()]),_:1}),We,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/search/index.js ")]),default:l(()=>[Ge,s()]),_:1}),He,a(o,null,{caption:l(()=>[s(" modules/@apostrophecms/template/index.js ")]),default:l(()=>[Xe,s()]),_:1})])}const cs=n(i,[["render",Ze]]);export{rs as __pageData,cs as default};
