import{_ as e,o as a,c as t,$ as n}from"./chunks/framework.9fa1e75e.js";const u=JSON.parse('{"title":"Template tags","description":"","frontmatter":{},"headers":[],"relativePath":"reference/template-tags.md","filePath":"reference/template-tags.md","lastUpdated":1690289066000}'),s={name:"reference/template-tags.md"},o=n('<h1 id="template-tags" tabindex="-1">Template tags <a class="header-anchor" href="#template-tags" aria-label="Permalink to &quot;Template tags&quot;">​</a></h1><p>Apostrophe template tags add additional functionality to templates, such as inserting widget areas, async components, and template fragments. The tags described below are specific to Apostrophe, though they use the standard Nunjucks syntax: <code>{% tagName %}</code>. See standard tags in the <a href="https://mozilla.github.io/nunjucks/templating.html#tags" target="_blank" rel="noreferrer">Nunjucks reference</a>.</p><p>If a template tag takes multiple arguments they will be comma-separated. Additional context data may be included after a <code>with</code> keyword. See <code>area</code> below for examples of both.</p><table><thead><tr><th>Tag name</th><th>Description</th><th>Self-closing</th></tr></thead><tbody><tr><td><a href="#area"><code>area</code></a></td><td>Insert a <a href="/guide/areas-and-widgets.html">widget area</a></td><td>Yes</td></tr><tr><td><a href="#component"><code>component</code></a></td><td>Insert an <a href="/guide/async-components.html">async component</a></td><td>Yes</td></tr><tr><td><a href="#fragment"><code>fragment</code></a></td><td>Declare a <a href="/guide/fragments.html">template fragment</a></td><td>No</td></tr><tr><td><a href="#render"><code>render</code></a></td><td>Insert a basic template fragment</td><td>Yes</td></tr><tr><td><a href="#rendercall"><code>rendercall</code></a></td><td>Insert a template fragment that includes a <code>rendercaller</code> slot</td><td>No</td></tr><tr><td><a href="#widget"><code>widget</code></a></td><td>Used in the core area template to render individual widgets</td><td>Yes</td></tr></tbody></table><h2 id="area" tabindex="-1"><code>area</code> <a class="header-anchor" href="#area" aria-label="Permalink to &quot;`area`&quot;">​</a></h2><p>The <code>area</code> tag inserts an area field into the template. The area field <a href="/guide/areas-and-widgets.html#basic-area-configuration">must already be configured</a> in the page.</p><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% area context, areaName with contextOptions %}</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{# Without context options (most typical) #}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% area data.page, &#39;sidebar&#39; %}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">{# Including context options #}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% area data.page, &#39;main&#39; with {</span></span>\n<span class="line"><span style="color:#A6ACCD;">  &#39;@apostrophecms/image&#39;: {</span></span>\n<span class="line"><span style="color:#A6ACCD;">    sizes: &#39;(min-width: 600px) 45vw, (min-width: 1140px) 530px&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;">  }</span></span>\n<span class="line"><span style="color:#A6ACCD;">} %}</span></span></code></pre></div><h3 id="arguments" tabindex="-1">Arguments <a class="header-anchor" href="#arguments" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="context" tabindex="-1"><code>context</code> <a class="header-anchor" href="#context" aria-label="Permalink to &quot;`context`&quot;">​</a></h4><p>The area&#39;s document context, either a page (<code>data.page</code>), piece (<code>data.piece</code>), widget (<code>data.widget</code>), <code>array</code> field or <code>object</code> field. The area field must be defined in the field schema for that context. See the <a href="/guide/template-data.html">template data</a> section for more on each <code>data</code> property.</p><h4 id="areaname" tabindex="-1"><code>areaName</code> <a class="header-anchor" href="#areaname" aria-label="Permalink to &quot;`areaName`&quot;">​</a></h4><p>The name (a string) of the area field as defined in the field schema.</p><h4 id="contextoptions-optional" tabindex="-1"><code>contextOptions</code> (optional) <a class="header-anchor" href="#contextoptions-optional" aria-label="Permalink to &quot;`contextOptions` (optional)&quot;">​</a></h4><p>The context options object is added after area tag arguments following the <code>with</code> keyword. It is an object with keys matching the names of widget types allowed in that particular area field. Each key is assigned a value that will be passed into the widget template as <code>data.contextOptions</code>. See the <a href="/guide/core-widgets.html#image-widget">image widget guide</a> for an example.</p><p>Context options are optional for all core and official Apostrophe widget types.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Context options are not the best place for most widget configuration. That should be done in the <a href="/reference/field-types/area.html#widgets">area field configuration</a>. Context options are used to supplement that with options that only apply to the specific template context. Context options cannot change which widgets are permitted in an area.</p></div><h2 id="component" tabindex="-1"><code>component</code> <a class="header-anchor" href="#component" aria-label="Permalink to &quot;`component`&quot;">​</a></h2><p>The <code>component</code> tag inserts an asynchronous component into the template. See the <a href="/guide/async-components.html">async components guide</a> for more on using this feature.</p><h3 id="usage-1" tabindex="-1">Usage <a class="header-anchor" href="#usage-1" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% component &#39;module:componentName&#39; with data %}</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% component &#39;product:newest&#39; with { max: 3 } %}</span></span></code></pre></div><h3 id="arguments-1" tabindex="-1">Arguments <a class="header-anchor" href="#arguments-1" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="module-componentname" tabindex="-1"><code>module:componentName</code> <a class="header-anchor" href="#module-componentname" aria-label="Permalink to &quot;`module:componentName`&quot;">​</a></h4><p>The primary argument is a combination of the name of a module and the name of an async component from that module, separated by a colon. All async components belong to a specific module, though multiple modules may have components with the same name.</p><h4 id="data-optional" tabindex="-1"><code>data</code> (optional) <a class="header-anchor" href="#data-optional" aria-label="Permalink to &quot;`data` (optional)&quot;">​</a></h4><p>The data argument, following the <code>with</code> keyword, is available in the async component template as <code>data</code>. It can be any data type, however it is a best practice to use an object with subproperties.</p><h2 id="fragment" tabindex="-1"><code>fragment</code> <a class="header-anchor" href="#fragment" aria-label="Permalink to &quot;`fragment`&quot;">​</a></h2><p>Template fragments let us reuse template markup across a codebase, whether standard synchronous or <a href="/guide/async-components.html">async code</a>. The <code>fragment</code> tag <em>declares</em> a template fragment that will be inserted elsewhere with <a href="#render"><code>render</code></a> or <a href="#rendercall"><code>rendercall</code></a>. See the <a href="/guide/fragments.html">template fragments guide</a> for more on using this feature.</p><p>This tag must be closed with an <code>endfragment</code> tag.</p><h3 id="usage-2" tabindex="-1">Usage <a class="header-anchor" href="#usage-2" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% fragment name(parameters) %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">  {# Fragment markup #}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% endfragment %}</span></span></code></pre></div><p><strong>Examples:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% fragment button(text, action, options = {}) %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">o-button {{ options.class }}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">data-action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{{ action }}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    {{ text }}</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% endfragment %}</span></span></code></pre></div><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% fragment card(data = {}) %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">section</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">o-card</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ data.heading }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">      {# `rendercaller` connects to the `rendercall` tag below. #}</span></span>\n<span class="line"><span style="color:#A6ACCD;">      {{ rendercaller() }}</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">section</span><span style="color:#89DDFF;">&gt;</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% endfragment %}</span></span></code></pre></div><h3 id="arguments-2" tabindex="-1">Arguments <a class="header-anchor" href="#arguments-2" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="name-parameters" tabindex="-1"><code>name(parameters)</code> <a class="header-anchor" href="#name-parameters" aria-label="Permalink to &quot;`name(parameters)`&quot;">​</a></h4><p>The fragment name used to reference it in <code>render</code> and <code>rendercall</code> tags. It should be written like a function with parentheses. The parentheses may include parameter names if needed. Parameters should be separated by commas and may optionally include a default value assignment.</p><h2 id="render" tabindex="-1"><code>render</code> <a class="header-anchor" href="#render" aria-label="Permalink to &quot;`render`&quot;">​</a></h2><p>The <code>render</code> tag is used to insert a <a href="/guide/fragments.html">fragment</a> in a template.</p><h3 id="usage-3" tabindex="-1">Usage <a class="header-anchor" href="#usage-3" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% render name(arguments) %}</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% render button(&#39;Click me&#39;, &#39;send&#39;, { class: &#39;is-blue&#39; }) %}</span></span></code></pre></div><h3 id="arguments-3" tabindex="-1">Arguments <a class="header-anchor" href="#arguments-3" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="name-arguments" tabindex="-1"><code>name(arguments)</code> <a class="header-anchor" href="#name-arguments" aria-label="Permalink to &quot;`name(arguments)`&quot;">​</a></h4><p>The name of the fragment to render. It may include a source reference <a href="/guide/fragments.html#importing-fragments-across-files">if the fragment was imported</a> (e.g., <code>source.button()</code>). The parentheses following the name may take arguments to pass into the fragment.</p><h2 id="rendercall" tabindex="-1"><code>rendercall</code> <a class="header-anchor" href="#rendercall" aria-label="Permalink to &quot;`rendercall`&quot;">​</a></h2><p>Similar to <code>render</code>, <code>rendercall</code> tag is used to insert a fragment in a template. <code>rendercall</code> is used when <a href="/guide/fragments.html#inserting-markup-with-rendercall">injecting markup into a fragment as well</a>. The markup inside this tag is added in a fragment where it has a <code>rendercaller()</code> call.</p><p>This tag must be closed with an <code>endrendercall</code> tag.</p><h3 id="usage-4" tabindex="-1">Usage <a class="header-anchor" href="#usage-4" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% rendercall name(arguments) %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% endrendercall %}</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% rendercall card({ heading: &#39;Featured image&#39; }) %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">  {% area data.widget, &#39;photo&#39; %}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% endrendercall %}</span></span></code></pre></div><h3 id="arguments-4" tabindex="-1">Arguments <a class="header-anchor" href="#arguments-4" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="name-arguments-1" tabindex="-1"><code>name(arguments)</code> <a class="header-anchor" href="#name-arguments-1" aria-label="Permalink to &quot;`name(arguments)`&quot;">​</a></h4><p>The name of the fragment to render. It may include a source reference <a href="/guide/fragments.html#importing-fragments-across-files">if the fragment was imported</a> (e.g., <code>source.card()</code>). The parentheses following the name may take arguments to pass into the fragment.</p><h2 id="widget" tabindex="-1">widget <a class="header-anchor" href="#widget" aria-label="Permalink to &quot;widget&quot;">​</a></h2><p>The <code>widget</code> template tag will usually not be used in Apostrophe project templates. It is used in the core area template file to render individual widgets.</p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% widget widgetObject, widgetOptions with contextOptions %}</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{# Example from modules/@apostrophecms/area/views/area.html in A3 core #}</span></span>\n<span class="line"><span style="color:#A6ACCD;">{% widget item, widgetOptions with data._with %}</span></span></code></pre></div><h3 id="arguments-5" tabindex="-1">Arguments <a class="header-anchor" href="#arguments-5" aria-label="Permalink to &quot;Arguments&quot;">​</a></h3><h4 id="widgetobject" tabindex="-1"><code>widgetObject</code> <a class="header-anchor" href="#widgetobject" aria-label="Permalink to &quot;`widgetObject`&quot;">​</a></h4><p>An individual widget object from area field data. Eventually passed into a widget template as <code>data.widget</code>.</p><h4 id="widgetoptions" tabindex="-1"><code>widgetOptions</code> <a class="header-anchor" href="#widgetoptions" aria-label="Permalink to &quot;`widgetOptions`&quot;">​</a></h4><p>Widget options object as defined in the area configuration. Eventually passed into a widget template as <code>data.options</code>.</p><h4 id="contextoptions" tabindex="-1"><code>contextOptions</code> <a class="header-anchor" href="#contextoptions" aria-label="Permalink to &quot;`contextOptions`&quot;">​</a></h4><p>Area context options for the widget type as <a href="/guide/areas-and-widgets.html#passing-context-options">defined in the template using the area</a>. Eventually passed into a widget template as <code>data.contextOptions</code>.</p>',72),l=[o];function r(c,p,i,d,h,m){return a(),t("div",null,l)}const f=e(s,[["render",r]]);export{u as __pageData,f as default};
