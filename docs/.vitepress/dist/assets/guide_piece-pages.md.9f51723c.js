import{_ as l,K as p,o as t,c,O as r,w as a,$ as n,a as e,k as s}from"./chunks/framework.9fa1e75e.js";const i="/assets/piece-page-modules.f5266f70.png",w=JSON.parse('{"title":"Piece index and show pages","description":"","frontmatter":{"prev":{"text":"Pieces","link":"guide/pieces.md"},"next":{"text":"Templating | Working with templates","link":"guide/templating.md"}},"headers":[],"relativePath":"guide/piece-pages.md","filePath":"guide/piece-pages.md","lastUpdated":1690289066000}'),d={name:"guide/piece-pages.md"},y=n(`<h1 id="piece-index-and-show-pages" tabindex="-1">Piece index and show pages <a class="header-anchor" href="#piece-index-and-show-pages" aria-label="Permalink to &quot;Piece index and show pages&quot;">​</a></h1><p><strong>Index pages</strong> list pieces of a particular type. Once one is created, each individual piece automatically has its own web page, known in Apostrophe as a <strong>show page</strong>. If you&#39;re familiar with blogs, you know this model all too well.</p><p>This feature set is powered by the <code>@apostrophecms/piece-page-type</code> module (because you&#39;re creating a <em>page type</em> that displays <em>pieces</em>, get it?).</p><p>Index pages support all features from <a href="/guide/pages.html">pages</a>, then add on some special features. In short, those are:</p><ul><li>Two template files: one for index pages and one for show pages</li><li>Additional piece data available in templates</li></ul><h2 id="creating-a-piece-page-type" tabindex="-1">Creating a piece page type <a class="header-anchor" href="#creating-a-piece-page-type" aria-label="Permalink to &quot;Creating a piece page type&quot;">​</a></h2><p>There are two critical steps to adding a new module for a piece page type:</p><ol><li>Extend <code>@apostrophecms/piece-page-type</code></li><li>Specify what piece type should be shown on the page</li></ol><p>Extending the right module is simple enough. These modules use the property:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">extend</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@apostrophecms/piece-page-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span></code></pre></div><p>Identifying the piece type can be done two ways: <strong>using a module naming convention</strong> or <strong>using the <code>pieceModuleName</code> setting</strong>. We can look at both options using a blog as our example.</p><h3 id="matching-a-piece-type-using-naming" tabindex="-1">Matching a piece type using naming <a class="header-anchor" href="#matching-a-piece-type-using-naming" aria-label="Permalink to &quot;Matching a piece type using naming&quot;">​</a></h3><p>In this example, the piece type is <code>article</code>, since &quot;articles&quot; are the individual entries that make up a blog. If you name the piece page type <code>article-page</code>, Apostrophe will automatically know that the two modules go together. (In case you missed the trick there, the piece page name is: piece type + <code>-page</code>.)</p><p>The piece page module then looks like:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// modules/article-page/index.js</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">extend</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@apostrophecms/piece-page-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Blog page</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>One benefit of this approach is that the codebase folders for the piece type and piece page type will be next to one another alphabetically. This tends to be the choice of the Apostrophe core team.</p><p><img src="`+i+`" alt="Screenshot of code directories &quot;article&quot; and &quot;article-page&quot;"></p><h3 id="specifying-the-piece-type-with-piecemodulename" tabindex="-1">Specifying the piece type with <code>pieceModuleName</code> <a class="header-anchor" href="#specifying-the-piece-type-with-piecemodulename" aria-label="Permalink to &quot;Specifying the piece type with \`pieceModuleName\`&quot;">​</a></h3><p>This method allows you to name the module whatever you want since you are specifically identifying a piece type. Set the <a href="/reference/module-api/module-options.html#piecemodulename"><code>pieceModuleName</code> option</a> to the piece type name and Apostrophe makes the right connection.</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// modules/blog-page/index.js</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">extend</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@apostrophecms/piece-page-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Blog page</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pieceModuleName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">article</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>Either method works well and you may find both options useful depending on the situation.</p><h3 id="add-template-files-and-instantiate" tabindex="-1">Add template files and instantiate <a class="header-anchor" href="#add-template-files-and-instantiate" aria-label="Permalink to &quot;Add template files and instantiate&quot;">​</a></h3><p>Piece page types use two templates, both added in the module&#39;s <code>views</code> directory (e.g., <code>modules/article-page/views/</code>).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>When using the <a href="/guide/setting-up.html#the-apostrophe-cli-tool">official CLI</a> to create a piece page type, include the <code>--page</code> option when creating the piece type. It will not only generate the piece type for you, but also the piece page code including blank template files.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">apos</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">piece</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">article</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--page</span></span></code></pre></div></div><table><thead><tr><th>Template file name</th><th>What is it?</th></tr></thead><tbody><tr><td><code>index.html</code></td><td>Template for listing pieces (the <strong>&quot;index page</strong>)</td></tr><tr><td><code>show.html</code></td><td>Template to display an individual piece (a <strong>&quot;show page&quot;</strong>)</td></tr></tbody></table><p>We&#39;ll review each template&#39;s features next.</p><p>Once those template files exist, you would <strong>add this to the <code>app.js</code> configuration</strong> <a href="/guide/modules.html#setting-up-a-module">like any other module</a>. Additionally, in order for your pages to show up in the page selection dropdown, you also need to add your module to the <code>module/@apostrophecms/page/index.js</code> file. As with other pages, you add an object with the name of the module and a label into the <code>types</code> option array.</p>`,27),D=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"module."),s("span",{style:{color:"#A6ACCD"}},"export "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"options"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"types"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," [")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"      "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// 👇 Adding our new page type")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"article-page"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#F07178"}},"label"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"Article page"),s("span",{style:{color:"#89DDFF"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"},")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"      "),s("span",{style:{color:"#676E95","font-style":"italic"}},'// 👇 Optionally including the core "Home page" type')]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"@apostrophecms/home-page"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#F07178"}},"label"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"Home page"),s("span",{style:{color:"#89DDFF"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#89DDFF"}},"}")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),h=n(`<div class="warning custom-block"><p class="custom-block-title">🛑 Hold up. ✋</p><p>You&#39;ve reviewed the <a href="/guide/pages.html">page type guide</a>, right? The sections below will highlight the special features of index and show page templates. For general page template syntax, see that page type guide.</p></div><h2 id="the-index-page-template" tabindex="-1">The index page template <a class="header-anchor" href="#the-index-page-template" aria-label="Permalink to &quot;The index page template&quot;">​</a></h2><p>Index page templates look very similar to other page templates.</p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{# modules/article-page/views/index.html #}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">{% extends &quot;layout.html&quot; %}</span></span>
<span class="line"><span style="color:#A6ACCD;">{% import &#39;@apostrophecms/pager:macros.html&#39; as pager with context %}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">{% block main %}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ data.page.title }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  {% for article in data.pieces %}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">article</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{{ article._url }}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ article.title }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">article</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  {% endfor %}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  {{ pager.render({</span></span>
<span class="line"><span style="color:#A6ACCD;">    page: data.currentPage,</span></span>
<span class="line"><span style="color:#A6ACCD;">    total: data.totalPages,</span></span>
<span class="line"><span style="color:#A6ACCD;">    class: &#39;blog-pager&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }, data.url) }}</span></span>
<span class="line"><span style="color:#A6ACCD;">{% endblock %}</span></span></code></pre></div><h3 id="data-pieces-and-other-unique-data-properties" tabindex="-1"><code>data.pieces</code> and other unique <code>data</code> properties <a class="header-anchor" href="#data-pieces-and-other-unique-data-properties" aria-label="Permalink to &quot;\`data.pieces\` and other unique \`data\` properties&quot;">​</a></h3><p>The first new thing here is the <code>import</code> statement, but we&#39;ll get back to that. Let&#39;s talk about the <strong>loop over <code>data.pieces</code></strong>.</p><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% for article in data.pieces %}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">article</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{{ article._url }}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ article.title }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">article</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% endfor %}</span></span></code></pre></div><p>Index page templates have access to <code>data.pieces</code>, which is an array of piece docs. Since it&#39;s an array, we use the <a href="https://mozilla.github.io/nunjucks/templating.html#for" target="_blank" rel="noreferrer">Nunjucks <code>for</code> tag</a> to loop over the pieces.</p><p>The <code>data</code> object properties unique to index pages are:</p><table><thead><tr><th>Property</th><th>What is it?</th></tr></thead><tbody><tr><td><code>pieces</code></td><td>An array of piece docs for the current set of results</td></tr><tr><td><code>currentPage</code></td><td>A number representing what page of results is shown, starting with <code>1</code></td></tr><tr><td><code>totalPages</code></td><td>The total number of results pages there are</td></tr><tr><td><code>totalPieces</code></td><td>The total number of pieces across all result pages</td></tr></tbody></table><h3 id="pagination" tabindex="-1">Pagination <a class="header-anchor" href="#pagination" aria-label="Permalink to &quot;Pagination&quot;">​</a></h3><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{% import &#39;@apostrophecms/pager:macros.html&#39; as pager with context %}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">{{ pager.render({</span></span>
<span class="line"><span style="color:#A6ACCD;">  page: data.currentPage,</span></span>
<span class="line"><span style="color:#A6ACCD;">  total: data.totalPages,</span></span>
<span class="line"><span style="color:#A6ACCD;">  class: &#39;blog-pager&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}, data.url) }}</span></span></code></pre></div><p>By default, index pages will include up to <em>ten</em> pieces on <code>data.pieces</code> at a time. <strong>You can change the number of pieces in each page of results</strong> by setting <a href="/reference/module-api/module-options.html#perpage-2">the <code>perPage</code> option</a> on the module. The data passed to templates will update, so you don&#39;t need to make any other adjustments.</p><p>Apostrophe&#39;s pager macro adds basic, unstyled pagination to view more. The pager macro is a special template using the <a href="https://mozilla.github.io/nunjucks/templating.html#macro" target="_blank" rel="noreferrer">Nunjucks macro</a> feature. This particular macro accepts two arguments:</p><ol><li>an object with the <code>currentPage</code> and <code>totalPages</code> values, described above, as well as an optional CSS class for the pager wrapper</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">page</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">currentPage</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">total</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">totalPages</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">class</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">my-pager-class</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// Optional</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ol start="2"><li>the page URL, <code>data.url</code></li></ol><h2 id="the-show-page-template" tabindex="-1">The show page template <a class="header-anchor" href="#the-show-page-template" aria-label="Permalink to &quot;The show page template&quot;">​</a></h2><p>Show pages are the web pages for individual pieces, rendered from <code>show.html</code> templates. Instead of <code>data.page</code>, the template uses <code>data.piece</code> to access the piece data.</p><p>Assuming our <code>article</code> piece type example has a single <code>body</code> area, it could look like this:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// modules/article/index.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">extend</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@apostrophecms/piece-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Article</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Additionally add a \`pluralLabel\` option if needed.</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">fields</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Article text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">area</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">options</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">max</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">widgets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">@apostrophecms/rich-text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">group</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">basics</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Basics</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">fields</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [ </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">title</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-njk"><button title="Copy Code" class="copy"></button><span class="lang">njk</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">{# modules/article-page/views/show.html #}</span></span>
<span class="line"><span style="color:#A6ACCD;">{% extends &quot;layout.html&quot; %}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">{% block main %}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ data.piece.title }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">section</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    {% area data.piece, &#39;body&#39; %}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">section</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% endblock %}</span></span></code></pre></div><p>There are some other special data available in show page templates:</p><table><thead><tr><th>Property</th><th>What is it?</th></tr></thead><tbody><tr><td><code>piece</code></td><td>The document object for the featured piece. In a blog, this would be a single article.</td></tr><tr><td><code>page</code></td><td>In show page templates, <code>data.page</code> refers to the index page</td></tr><tr><td><code>previous</code></td><td>If using the <a href="/reference/module-api/module-options.html#previous"><code>previous: true</code> option</a>, <code>data.previous</code> is the previous piece based on the <a href="/reference/module-api/module-options.html#sort">sort</a></td></tr><tr><td><code>next</code></td><td>If using the <a href="/reference/module-api/module-options.html#next"><code>next: true</code> option</a>, <code>data.next</code> is the next piece based on the <a href="/reference/module-api/module-options.html#sort">sort</a></td></tr></tbody></table><h2 id="index-and-show-page-url-basics" tabindex="-1">Index and show page URL basics <a class="header-anchor" href="#index-and-show-page-url-basics" aria-label="Permalink to &quot;Index and show page URL basics&quot;">​</a></h2><p>Index page URLs, like other page URLs, generally are constructed from the base domain/URL (the home page URL) plus their slug. Page slugs include forward slashes and, by default, the path of their parent page, if they have one.</p><p>If the home page URL was <code>https://example.rocks</code> and the &quot;Articles&quot; index page had the slug <code>/articles</code>, the &quot;Articles&quot; page URL would be <strong><code>https://example.rocks/articles</code></strong>.</p><p>Show pages are extensions of their index page. To that end, their URLs are the index page url plus the piece slug. Piece slugs do not have slashes or look like a URL path on their own since pieces can be used in many ways.</p><p>Consider an article &quot;How to write JavaScript.&quot; Apostrophe would generate the slug <code>how-to-write-javascript</code> based on the title. With the index page url <code>https://example.rocks/articles</code> and that slug, the show page URL would be <strong><code>https://example.rocks/articles/how-to-write-javascript</code></strong>.</p><p>The structure of index and show page URLs is one of the most clear ways to understand how show pages depend on index pages. Even if this does not seem terribly complex, it is important to understand that relationship.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You may create multiple index pages of a particular type. If you do, the related piece show pages can be accessed at URLs based on any of the index pages. For example, if you create one articles index page with the slug <code>/articles</code> and another with <code>/news</code>, both of these URLs will go to the same article:</p><ul><li><code>https://example.rocks/articles/how-to-write-javascript</code></li><li><code>https://example.rocks/news/how-to-write-javascript</code></li></ul><p>This can be used to create index pages that are filtered to list different pieces (e.g., articles on different topics).</p><p>Even if any of the index page URL paths can be used to reach a particular show page, the piece will have a primary <code>_url</code> property when requested (e.g., in a <code>GET</code> API request). That primary URL is generated using the index page identified using the <code>chooseParentPage</code> method on <code>@apostrophecms/piece-page-type</code> (and modules that extend it). By default it simply returns the first index page created, but you can override that method to choose a matching index page another way.</p></div>`,31);function F(g,C,u,A,m,f){const o=p("AposCodeBlock");return t(),c("div",null,[y,r(o,null,{caption:a(()=>[e(" modules/@apostrophecms/page/index.js ")]),default:a(()=>[D,e()]),_:1}),h])}const x=l(d,[["render",F]]);export{w as __pageData,x as default};
